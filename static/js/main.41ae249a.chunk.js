(this["webpackJsonpnobel-dev"]=this["webpackJsonpnobel-dev"]||[]).push([[0],{385:function(e,t,a){},527:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a.n(o),r=a(65),l=a.n(r),i=a(583),s=a(277),c=a(587),d=a(85),h=a(86),g=a(137),b=(a(385),a(1));i.a,s.a,c.a,d.a,h.a,g.a;var y=a(33);const x=["#0cc0aa","#4787c9","#fb0998","#59a20c","#7c08c5","#e0c645","#715cb6","#ef972d","#a57a6a","#c6c0fe","#ec9bfa","#421674","#b3e467","#5c190c","#55f17b","#c25357","#b9dcca","#29403b","#f4b8ab","#6a8b7b"];class j{constructor(e){this._data=e,this._initOptions(),this._initFilters(),this.filterData()}get options(){return this._options}get filters(){return this._filters}get filteredData(){return this._filteredData}}j.prototype._initOptions=function(){this._options={},this._options.countries=Array.from(y.g(this._data,(e=>e.country)).keys()).sort(),this._options.categories=Array.from(y.g(this._data,(e=>e.category)).keys()),this._options.years=Array.from(y.g(this._data,(e=>e.year)).keys()).sort(((e,t)=>e-t)),this._options.genders=["Male","Female"]},j.prototype._initFilters=function(){console.log("I start to init options"),console.log("this.options:",this._options);const e=this._options.years.length-1;this._filters={},this._filters.category=[...this._options.categories],this._filters.gender=[...this._options.genders],this._filters.country=y.i(this._data,(e=>e.length),(e=>e.country)).sort(((e,t)=>y.d(e[1],t[1]))).slice(0,10).map((e=>e[0])).concat(["China","India"]),this._filters.year=[this._options.years[0],this._options.years[e]]},j.prototype._buildChartData=function(){this._filteredData.winnersByCountry=y.f(this._filteredData,(e=>e.length),(e=>e.country)).sort(((e,t)=>y.d(e[1],t[1]))),this._filteredData.maxWinners=this._filteredData.winnersByCountry[0],this._filteredData.sumWinners=y.j(this._filteredData.winnersByCountry,(e=>{let[t,a]=e;return a})),this._filteredData.countryNum=this._filteredData.winnersByCountry.length,this._filteredData.year=this._filters.year,this._filteredData.categories=this._filters.category},j.prototype.filterData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(this._filters=e),console.log("Before filter, filters:",e),console.log("Before filter, data:",this),this._filteredData=this._data.filter((e=>e.year>=this._filters.year[0]&&e.year<=this._filters.year[1]&&this._filters.country.find((t=>t.toLowerCase()==e.country.toLowerCase()))&&this._filters.category.find((t=>t.toLowerCase()==e.category.toLowerCase()))&&this._filters.gender.find((t=>t.toLowerCase()==e.gender.toLowerCase())))),this._buildChartData(),console.log("After filter, data:",this),this};const u=e=>e.winnersByCountry.map(((e,t)=>({country:e[0],number:e[1],countryId:t+1})));var p=a(605),m=a(604),f=a(215),O=a(50),w=a(138),X=a(593),v=a(176),C=a(298);const _=a(266),D={PaperProps:{style:{maxHeight:224,width:250}}},W=e=>{let{data:t,label:a,options:n,defaultOptions:r,onSetFilter:l,sx:i}=e;console.log("label:",a);const[s,c]=Object(o.useState)(r),[[d,h],g]=Object(o.useState)([_.uniqueId(a+"_id_"),_.uniqueId(a+"_select_")]);return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(w.a,{sx:{...i,border:"2px solid green"},children:[Object(b.jsx)(f.a,{id:d,children:a}),Object(b.jsx)(v.a,{labelId:d,id:h,multiple:!0,value:s,onChange:e=>{const{target:{value:o}}=e,n="string"===typeof o?o.split(","):o;c(n),console.log("new filter:",{...t.filters,[a.toLowerCase()]:n}),l({...t.filters,[a.toLowerCase()]:n})},classes:{select:{fontSize:"small",margin:"100px 200px",border:"4px solid cyan",color:"green"}},input:Object(b.jsx)(m.a,{label:a}),renderValue:e=>e.join(", "),MenuProps:D,sx:{fontSize:"small",fontWeight:900},children:n.map((e=>Object(b.jsxs)(O.a,{value:e,sx:{fontSize:"small",border:"2px solid green"},children:[Object(b.jsx)(C.a,{checked:s.includes(e)}),Object(b.jsx)(X.a,{primary:e})]},e)))})]})})};var B=a(299),S=a(601);function k(e){const{range:t,onSetFilter:a,data:n,min:r,max:l}=e,[i,s]=Object(o.useState)(t);return Object(b.jsx)(B.a,{elevation:10,sx:{border:"2px solid green",textAlign:"center",pt:2,px:3},children:Object(b.jsx)(S.a,{defaultValue:t,value:i,onChange:(e,t)=>{console.log("On Slider Change:",t),s(t)},onChangeCommitted:(e,t)=>{console.log("On Slider Commit Change:",t),a({...n.filters,year:t})},valueLabelDisplay:"on",min:r,max:l,step:1,marks:!0,disableSwap:!0,sx:{border:"2px solid yellow",mt:0}})})}const A=e=>{let{data:t,onSetFilter:a}=e;console.log("Menu rendering");const o={data:t,onSetFilter:a,sx:{width:"100%",maxWidth:"100%"}},n=t.options.years.length-1;return Object(b.jsxs)(p.a,{container:!0,direction:"row",columnSpacing:2,rowSpacing:1,justifyContent:"center",alignItems:"center",wrap:"wrap",children:[Object(b.jsx)(p.a,{item:!0,xs:8,sm:4,md:4,lg:2,xl:2,sx:{border:"2px solid red"},children:Object(b.jsx)(W,{...o,label:"Category",options:t.options.categories,defaultOptions:t.filters.category})}),Object(b.jsx)(p.a,{item:!0,xs:4,sm:2,md:2,lg:1,xl:1,sx:{border:"2px solid red"},children:Object(b.jsx)(W,{...o,label:"Gender",options:t.options.genders,defaultOptions:t.filters.gender})}),Object(b.jsx)(p.a,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,sx:{border:"2px solid red"},children:Object(b.jsx)(W,{...o,label:"Country",options:t.options.countries,defaultOptions:t.filters.country})}),Object(b.jsx)(p.a,{item:!0,xs:12,sm:10,md:10,lg:6,xl:6,sx:{border:"2px solid red"},children:Object(b.jsx)(k,{...o,range:t.filters.year,min:t.options.years[0],max:t.options.years[n]})})]})};var T=o.memo(A),Y=a(606),L=a(603);const M=[{value:"WinnersByCountry",text:"Winners By Country"},{value:"WinnersByCategory",text:"Winners By Category"},{value:"WinnersByYear",text:"Winners By Year"},{value:"WinnersByTable",text:"Winners By Table"}];function K(e){let{selection:t,onSetSelection:a}=e;console.log("MenuCharts render");return Object(b.jsx)("div",{style:{border:"2px solid green",textAlign:"center",marginTop:10},children:Object(b.jsx)(L.a,{color:"primary",value:t,exclusive:!0,onChange:(e,t)=>{console.log("handleSelection newSelection:",t),t&&a(t)},sx:{textTransform:"none",justifyContent:"center",flexWrap:"wrap"},children:M.map(((e,t)=>Object(b.jsx)(Y.a,{value:e.value,sx:{textTransform:"none",fontSize:"large"},children:e.text},t)))})})}var F=o.memo(K),P=a(595),I=a(596),N=a(133),R=a(282),E=a(71),z=a(112);const H={top:80,right:5,bottom:100,left:30},V=e=>{let{data:t,xDataKey:a,xDataType:o,barDataKey:n,barDataType:r,beginYear:l,endYear:i}=e;console.log("WinnersByCountry render"),t=u(t),console.log("WinnersByCountry barchartData:",t);const s=50*t.length;return console.log("WinnersByCountry minWidth:",s),Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(P.a,{width:"100%",minWidth:s,height:600,children:Object(b.jsxs)(I.a,{data:t,margin:H,style:{border:"2px solid red"},children:[Object(b.jsx)(d.a,{dataKey:a,tick:Object(b.jsx)(G,{data:t}),tickLine:!1,axisLine:!1,allowDataOverflow:!1,interval:0,fontSize:20}),Object(b.jsx)(h.a,{hide:!0,axisLine:!1,tickLine:!1}),Object(b.jsx)(g.a,{content:Object(b.jsx)(q,{})}),Object(b.jsx)(N.a,{align:"center",verticalAlign:"middle",height:36,wrapperStyle:{top:5,paddingTop:0,border:"2px solid cyan"}}),Object(b.jsxs)(R.a,{name:"Nobel winners by country(".concat(l,"~").concat(i,")"),dataKey:n,fill:"green",style:{border:"2px solid yellow"},wrapperStyle:{border:"2px solid yellow"},interval:30,children:[Object(b.jsx)(E.a,{dataKey:n,position:"top"}),t.map(((e,t)=>Object(b.jsx)(z.a,{fill:x[t%x.length]},"cell-".concat(t))))]})]})})})},G=e=>{const{x:t,y:a,payload:o,data:n,index:r}=e;return console.log("Render AxisTick props:",e),console.log("Payload value:",n[o.value-1].country),Object(b.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:Object(b.jsx)("text",{x:0,y:0,dx:-5,dy:0,textAnchor:"end",fill:"#666",transform:"rotate(-90)",children:n[o.value-1].country})})},q=e=>{let{active:t,payload:a,label:o}=e;return null};var J=o.memo(V),U=a(602),Q=a(283);Math.PI;const Z={top:30,right:5,bottom:100,left:5},$=e=>{let{data:t,dataKey:a,beginYear:o,endYear:n}=e;console.log("WinnersByRadio render");const r=oe(t,5);return console.log("filtered pie data:",r),Object(b.jsx)(P.a,{width:"100%",minWidth:240,height:600,minHeight:500,children:Object(b.jsxs)(U.a,{margin:Z,style:{border:"2px solid red"},children:[Object(b.jsxs)("text",{x:120,y:30,fill:"#666",textAnchor:"middle",children:["Winners Percentage By Country",Object(b.jsxs)("tspan",{x:120,y:50,children:["(",o,"~",n,")"]})]}),Object(b.jsx)(Q.a,{data:r,dataKey:a,cx:120,cy:150,outerRadius:70,fill:"#8884d8",label:ee,children:r.map(((e,t)=>Object(b.jsx)(z.a,{fill:x[t%x.length]},"cell-".concat(t))))}),Object(b.jsx)(g.a,{contentStyle:{backgroundColor:"#f7efd2",borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(b.jsx)(te,{data:r}),allowEscapeViewBox:{x:!1,y:!1}}),Object(b.jsx)(N.a,{content:Object(b.jsx)(ae,{data:r})})]})})},ee=e=>{const{x:t,y:a,cx:o,cy:n,midAngle:r,innerRadius:l,outerRadius:i,percent:s,index:c}=e;return console.log("Pie label:",e),Object(b.jsx)("text",{x:t,y:a,fill:"black",textAnchor:t>o?"start":"end",dominantBaseline:"central",children:"".concat((100*s).toFixed(0),"%")})},te=e=>{const{data:t,active:a,payload:o,label:n,contentStyle:r}=e;if(console.log("Pie tooltop:",e),a&&o&&o.length){const e=o[0].name;console.log("Pie index:",e);const{country:a,number:n,radio:l}=t[e];return Object(b.jsxs)("div",{style:{...r},children:[Object(b.jsx)("p",{children:"Percentage: ".concat(l.toFixed(0),"%")}),Object(b.jsx)("p",{children:"Number: ".concat(n)}),Object(b.jsx)("p",{children:"Country: ".concat(a)})]})}return null},ae=e=>{const{data:t,payload:a}=e;return console.log("xxx legend:",e),Object(b.jsx)("ul",{style:{marginTop:20},children:a.map(((e,a)=>Object(b.jsx)("li",{style:{color:x[a%x.length]},children:t[e.value].country},"item-".concat(a))))})},oe=(e,t)=>{e=u(e),console.log("barchartData:",e),e=(e=>{let t=e.reduce(((e,t)=>e+t.number),0);return e.forEach((e=>{e.radio=100*e.number/t})),e})(e),console.log("XXXXXX, RAW data:",e);let a=e.reduce(((e,t)=>e+t.number),0);console.log("XXXXXX, RAW data total num:",a);let o=e.filter((e=>e.radio>=t));console.log("XXXXXX, filtered data:",o);let n=100-o.reduce(((e,t)=>e+t.radio),0),r=o.reduce(((e,t)=>e+t.number),0);return o.push({country:"Others",countryId:o.length+1,number:a-r,radio:n}),o};var ne=o.memo($),re=a(597),le=a(162),ie=a(287);const se=15,ce={top:20,right:20,bottom:30,left:0},de={left:10,right:20},he={top:10,bottom:10},ge=e=>{console.log("WinnersByCategory render!");const{data:t}=e,[a,o]=(e=>{const t=[...e].sort(((e,t)=>y.a(e.year,t.year)||y.a(e.category,t.category)));console.log("XXXXX dataPerYear1:",t),console.log("XXXXX dataPerYear1:",e);const a=y.e(t,(e=>e.year));return a.forEach((e=>{let[t,a]=e;a.forEach(((e,t)=>{e.index=t+1}))})),console.log("XXXXX sorted category:",e.categories.slice().sort()),t.maxWinners=y.h(a,(e=>e[1].length)),t.yearNum=t[t.length-1].year-t[0].year+1,console.log("XXXXX dataPerYear2:",a),console.log("XXXXX sorted data:",t),[t,e.categories.slice().sort()]})(t),n=1.2*se*a.maxWinners+ce.top+ce.bottom+he.top+he.bottom,r=20*a.yearNum+de.left+de.right+ce.left+ce.right;return console.log("WinnersByCategory Chart height:",n," xAxisWidth:",r),Object(b.jsx)("div",{style:{width:"100%",height:n+20,border:"2px solid black",overflow:"auto"},children:Object(b.jsxs)(re.a,{style:{border:"2px solid green"},margin:ce,width:r,height:n,minHeight:400,children:[Object(b.jsx)(c.a,{strokeDasharray:"3 3"}),Object(b.jsx)(d.a,{allowDuplicatedCategory:!1,dataKey:"year",type:"number",name:"year",domain:["dataMin","dataMax"],interval:0,tickCount:a.yearNum/2+1,angle:-90,minTickGap:20,tickMargin:25,padding:de,tick:{textAnchor:"middle",verticalAnchor:"end",stroke:"red",dx:-3},allowDataOverflow:!0}),Object(b.jsx)(h.a,{dataKey:"index",type:"number",name:"WinnerCount",interval:0,tickCount:a.maxWinners,domain:["dataMin","dataMax+2"],padding:he}),Object(b.jsx)(le.a,{type:"number",range:[100,100]}),Object(b.jsx)(N.a,{layout:"horizontal",align:"left",verticalAlign:"top",wrapperStyle:{paddingLeft:60,paddingBottom:10,border:"2px solid green",width:"50%"}}),Object(b.jsx)(g.a,{cursor:{strokeDasharray:"3 3"}}),o.map(((e,t)=>{const o=a.filter((t=>t.category==e));return console.log("fff category:",o),Object(b.jsx)(ie.a,{shape:"circle",legendType:"circle",name:e,data:o,fill:x[t%x.length],children:o.map(((e,a)=>Object(b.jsx)(z.a,{fill:x[t%x.length]},"cell-".concat(a))))})}))]})})};var be=n.a.memo(ge),ye=a(598),xe=a(288);const je=e=>{let{data:t}=e;console.log("WinnersByYear render, data:",t),t=(e=>{const t=e.winnersByCountry.map((e=>e[0]));console.log("XXXXX country:",t),console.log("XXXXX data:",e);let a=y.f([...e],(e=>e.length),(e=>e.year),(e=>e.country)).sort(((e,t)=>y.a(e[0],t[0])||y.a(e[1],t[1])));return a=y.e(a,(e=>e[0])).map((e=>[e[0],e[1].map((e=>[e[1],e[2]]))])),console.log("XXXXX sortedData1:",a),a=a.map((e=>{const a={year:e[0]};return t.forEach((t=>{const o=Object.fromEntries(e[1]);o.hasOwnProperty(t)?a[t]=o[t]:a[t]=0})),a})),console.log("XXXXX sortedData2:",a),a.countries=t,a.yearNum=a[a.length-1].year-a[0].year+1,console.log("XXXXX sorted data:",a),a})(t);const a={top:20,right:100,bottom:30,left:30},o={left:10,right:20},n=400+a.top+a.bottom+10+10,r=20*t.yearNum+o.left+o.right+a.left+a.right;return console.log("XXX Chart height:",n),console.log("XXX xAxisWidth:",r),Object(b.jsx)("div",{style:{width:"100%",height:n+20,border:"2px solid black",overflow:"auto"},children:Object(b.jsxs)(ye.a,{data:t,style:{border:"2px solid green"},margin:a,width:r,height:n,children:[Object(b.jsx)(c.a,{strokeDasharray:"3 3"}),Object(b.jsx)(d.a,{allowDuplicatedCategory:!1,dataKey:"year",type:"number",name:"year",domain:["dataMin","dataMax"],interval:0,tickCount:t.yearNum/2+1,angle:-90,minTickGap:20,tickMargin:25,padding:o,tick:{textAnchor:"middle",verticalAnchor:"end",stroke:"red",dx:-3},allowDataOverflow:!0}),Object(b.jsx)(h.a,{}),Object(b.jsx)(g.a,{contentStyle:{backgroundColor:"#f7efd2",borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(b.jsx)(ue,{}),allowEscapeViewBox:{x:!1,y:!1}}),Object(b.jsx)(N.a,{layout:"horizontal",align:"left",verticalAlign:"top",iconType:"rect",wrapperStyle:{paddingLeft:60,paddingBottom:10,border:"2px solid green",width:"50%"}}),t.countries.map(((e,t)=>Object(b.jsx)(xe.a,{type:"step",dataKey:e,stackId:"1",stroke:x[t%x.length],fill:x[t%x.length]},t)))]})})},ue=e=>{const{active:t,payload:a,label:o,contentStyle:n}=e;return console.log("Area tooltop:",e),t&&a&&a.length?(a.filter((e=>e.value>0)),Object(b.jsxs)("div",{style:{...n},children:[Object(b.jsx)("p",{children:"Year:".concat(o)}),a.sort(((e,t)=>t.value-e.value)).filter((e=>e.value>0)).map(((e,t)=>Object(b.jsx)("p",{style:{color:e.fill},children:"".concat(e.dataKey,":").concat(e.value)},t)))]})):null};var pe=o.memo(je),me=a(212);var fe=function(e){let{data:t}=e;console.log("WinnersByTable render:",t);const a=t.map(((e,t)=>(e.id=t,e)));console.log("WinnersByTable:",t[0]);const o=Object.entries(t[0]).map((e=>{let t={field:e[0],headerName:e[0],width:150,fluid:1};return"id"==e[0]&&(t.hide=!0),"link"==e[0]?t.renderCell=e=>(console.log("YYYY:",e),Object(b.jsx)("div",{style:{overflow:"auto",lineHeight:"160%",padding:0},children:Object(b.jsx)("a",{href:e.value,children:e.row.name})})):t.renderCell=e=>(console.log("YYYYY:",e),Object(b.jsx)("div",{style:{overflow:"auto",lineHeight:"160%",padding:0},children:"object"==typeof e.value&&null!=e.value?e.value.toString():e.value})),t}));return Object(b.jsx)("div",{style:{height:480,width:"100%"},children:Object(b.jsx)(me.a,{rows:a,columns:o,components:{Toolbar:me.b}})})};const Oe=e=>{let{data:t,selectedChart:a}=e;console.log("NobelCharts render:",t);const n=Object(o.useMemo)((()=>(e=>(console.log("build ScatterChart:",e),Object(b.jsx)(p.a,{item:!0,width:"100%",children:Object(b.jsx)(be,{data:e})})))(t)),[t]),r=Object(o.useMemo)((()=>(e=>(console.log("build barchart"),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(p.a,{item:!0,sx:{width:{xs:"100%",sm:"100%",md:"100%",lg:"75%",xl:"75%"},maxWidth:{xs:"100%",sm:"100%",md:"100%",lg:"75%",xl:"75%"}},children:Object(b.jsx)(J,{data:e,xDataKey:"countryId",xDataType:"number",barDataKey:"number",barDataType:"number",beginYear:e.year[0],endYear:e.year[1]})}),Object(b.jsx)(p.a,{item:!0,sx:{width:{xs:"100%",sm:"100%",md:"100%",lg:"25%",xl:"25%"},maxWidth:{xs:"100%",sm:"100%",md:"100%",lg:"25%",xl:"25%"}},children:Object(b.jsx)(ne,{data:e,dataKey:"radio",beginYear:e.year[0],endYear:e.year[1]})})]})))(t)),[t]),l=Object(o.useMemo)((()=>(e=>(console.log("build AreaChart"),Object(b.jsx)(p.a,{item:!0,width:"100%",children:Object(b.jsx)(pe,{data:e})})))(t)),[t]),i=Object(o.useMemo)((()=>(e=>(console.log("build buildTableChart"),Object(b.jsx)(p.a,{item:!0,width:"100%",children:Object(b.jsx)(fe,{data:e})})))(t)),[t]);return Object(b.jsx)(p.a,{container:!0,direction:"row",columnSpacing:2,rowSpacing:2,justifyContent:"space-between",alignItems:"center",wrap:"wrap",marginTop:2,children:{WinnersByCategory:n,WinnersByCountry:r,WinnersByYear:l,WinnersByTable:i}[a]})},we=a(266),Xe=e=>{const[{data:t,isDataLoaded:a},n]=Object(o.useState)({data:null,isDataLoaded:!1}),[r,l]=Object(o.useState)("WinnersByCountry");Object(o.useEffect)((()=>{console.log("Data fetch start"),async function(e){console.log("URL:",e);const t=await fetch(e).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.text()})).catch((e=>{throw e}));return console.log("Data fetch complete!"),t}("nobel_winners_cleaned.csv").then((e=>{console.log("Data parse start, rawData:",e),e=y.c(e,y.b);const t=new j(e);n({data:t,isDataLoaded:!0}),console.log("Data parse end!")})).catch((e=>console.log("Data fetch failed due to => ",e))),console.log("Data fetch end!")}),[]);const i=Object(o.useCallback)((e=>{n({data:we.clone(t.filterData(e)),isDataLoaded:!0})}),[t]),s=Object(o.useCallback)((e=>{console.log("Chart:",e," is selected."),l(e)}),[]);return console.log("NobelApp rendering:",t," active chart:",r),a?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(T,{data:t,onSetFilter:i}),Object(b.jsx)(F,{selection:r,onSetSelection:s}),Object(b.jsx)(Oe,{data:t.filteredData,selectedChart:r})]}):Object(b.jsx)("h1",{children:"Loading data...... please be patient or try again!"})},ve=document.getElementById("root");l.a.render(Object(b.jsx)(Xe,{}),ve)}},[[527,1,2]]]);
//# sourceMappingURL=main.41ae249a.chunk.js.map