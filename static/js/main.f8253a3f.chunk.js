(this["webpackJsonpnobel-dev"]=this["webpackJsonpnobel-dev"]||[]).push([[0],{525:function(e,t,a){e.exports={App:"styles_App__1QDQB",ScatterPlot:"styles_ScatterPlot__2XZuw","recharts-responsive-container":"styles_recharts-responsive-container__3KPgH"}},526:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(63),i=a.n(o),l=a(33);const s="#666",c="#f7efd2",d=["#0cc0aa","#4787c9","#fb0998","#59a20c","#7c08c5","#e0c645","#715cb6","#ef972d","#a57a6a","#c6c0fe","#ec9bfa","#421674","#b3e467","#5c190c","#55f17b","#c25357","#b9dcca","#29403b","#f4b8ab","#6a8b7b"];class h{constructor(e){this._data=e,this._initOptions(),this._initFilters(),this.filterData()}get options(){return this._options}get filters(){return this._filters}get filteredData(){return this._filteredData}}h.prototype._initOptions=function(){this._options={},this._options.countries=Array.from(l.g(this._data,(e=>e.country)).keys()).sort(),this._options.categories=Array.from(l.g(this._data,(e=>e.category)).keys()),this._options.years=Array.from(l.g(this._data,(e=>e.year)).keys()).sort(((e,t)=>e-t)),this._options.genders=["Male","Female"]},h.prototype._initFilters=function(){const e=this._options.years.length-1;this._filters={},this._filters.category=[...this._options.categories],this._filters.gender=[...this._options.genders],this._filters.country=l.i(this._data,(e=>e.length),(e=>e.country)).sort(((e,t)=>l.d(e[1],t[1]))).slice(0,10).map((e=>e[0])).concat(["China","India"]),this._filters.year=[this._options.years[0],this._options.years[e]]},h.prototype._buildChartData=function(){this._filteredData.winnersByCountry=l.f(this._filteredData,(e=>e.length),(e=>e.country)).sort(((e,t)=>l.d(e[1],t[1]))),this._filteredData.maxWinners=this._filteredData.winnersByCountry[0],this._filteredData.sumWinners=l.j(this._filteredData.winnersByCountry,(e=>{let[t,a]=e;return a})),this._filteredData.countryNum=this._filteredData.winnersByCountry.length,this._filteredData.year=this._filters.year,this._filteredData.categories=this._filters.category},h.prototype.filterData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(this._filters=e),console.log("Before filter, filters:",e),console.log("Before filter, data:",this),this._filteredData=this._data.filter((e=>e.year>=this._filters.year[0]&&e.year<=this._filters.year[1]&&this._filters.country.find((t=>t.toLowerCase()==e.country.toLowerCase()))&&this._filters.category.find((t=>t.toLowerCase()==e.category.toLowerCase()))&&this._filters.gender.find((t=>t.toLowerCase()==e.gender.toLowerCase())))),this._buildChartData(),console.log("After filter, data:",this),this};const y=e=>e.winnersByCountry.map(((e,t)=>({country:e[0],number:e[1],countryId:t+1})));var g=a(603),j=a(602),u=a(215),b=a(48),x=a(136),p=a(587),m=a(174),f=a(297),O=a(1);const w=a(233),v={PaperProps:{style:{maxHeight:224,width:250}}},C=e=>{let{data:t,label:a,options:r,defaultOptions:o,onSetFilter:i,sx:l}=e;console.log("label:",a);const[s,c]=Object(n.useState)(o),[[d,h],y]=Object(n.useState)([w.uniqueId(a+"_id_"),w.uniqueId(a+"_select_")]);return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(x.a,{sx:{...l},children:[Object(O.jsx)(u.a,{id:d,children:a}),Object(O.jsx)(m.a,{labelId:d,id:h,multiple:!0,value:s,onChange:e=>{const{target:{value:n}}=e,r="string"===typeof n?n.split(","):n;c(r),console.log("new filter:",{...t.filters,[a.toLowerCase()]:r}),i({...t.filters,[a.toLowerCase()]:r})},input:Object(O.jsx)(j.a,{label:a}),renderValue:e=>e.join(", "),MenuProps:v,sx:{fontSize:"small",fontWeight:200},children:r.map((e=>Object(O.jsxs)(b.a,{value:e,sx:{fontSize:"small"},children:[Object(O.jsx)(f.a,{checked:s.includes(e)}),Object(O.jsx)(p.a,{primary:e})]},e)))})]})})};var _=a(298),D=a(599);function B(e){const{range:t,onSetFilter:a,data:r,min:o,max:i}=e,[l,s]=Object(n.useState)(t);return Object(O.jsx)(_.a,{elevation:10,sx:{textAlign:"center",pt:2,px:3},children:Object(O.jsx)(D.a,{defaultValue:t,value:l,onChange:(e,t)=>{console.log("On Slider Change:",t),s(t)},onChangeCommitted:(e,t)=>{console.log("On Slider Commit Change:",t),a({...r.filters,year:t})},valueLabelDisplay:"on",min:o,max:i,step:1,marks:!0,disableSwap:!0,sx:{mt:0}})})}const W=e=>{let{data:t,onSetFilter:a}=e;console.log("Menu rendering");const n={data:t,onSetFilter:a,sx:{width:"100%",maxWidth:"100%"}},r=t.options.years.length-1;return Object(O.jsxs)(g.a,{container:!0,direction:"row",columnSpacing:2,rowSpacing:1,justifyContent:"center",alignItems:"center",wrap:"wrap",mt:1,children:[Object(O.jsx)(g.a,{item:!0,xs:8,sm:4,md:4,lg:2,xl:2,children:Object(O.jsx)(C,{...n,label:"Category",options:t.options.categories,defaultOptions:t.filters.category})}),Object(O.jsx)(g.a,{item:!0,xs:4,sm:2,md:2,lg:1,xl:1,children:Object(O.jsx)(C,{...n,label:"Gender",options:t.options.genders,defaultOptions:t.filters.gender})}),Object(O.jsx)(g.a,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:Object(O.jsx)(C,{...n,label:"Country",options:t.options.countries,defaultOptions:t.filters.country})}),Object(O.jsx)(g.a,{item:!0,xs:12,sm:10,md:10,lg:6,xl:6,children:Object(O.jsx)(B,{...n,range:t.filters.year,min:t.options.years[0],max:t.options.years[r]})})]})};var S=n.memo(W),k=a(604),T=a(601);const A=[{value:"WinnersByCountry",text:"Winners By Country"},{value:"WinnersByCategory",text:"Winners By Category"},{value:"WinnersByYear",text:"Winners By Year"},{value:"WinnersByTable",text:"Winners By Table"}];function L(e){let{selection:t,onSetSelection:a}=e;console.log("MenuCharts render");return Object(O.jsx)("div",{style:{textAlign:"center",marginTop:10},children:Object(O.jsx)(T.a,{color:"primary",value:t,exclusive:!0,onChange:(e,t)=>{console.log("handleSelection newSelection:",t),t&&a(t)},sx:{textTransform:"none",justifyContent:"center",flexWrap:"wrap"},children:A.map(((e,t)=>Object(O.jsx)(k.a,{value:e.value,classes:{root:{border:"2px solid yellow"}},sx:{boxShadow:2,textTransform:"none",fontSize:"large",m:0,p:1},children:e.text},t)))})})}var M=n.memo(L),Y=a(589),K=a(590),F=a(110),P=a(111),R=a(135),N=a(131),I=a(280),E=a(85),z=a(109);const H={top:80,right:5,bottom:100,left:30},V=e=>{let{data:t,xDataKey:a,xDataType:n,barDataKey:r,barDataType:o,beginYear:i,endYear:l}=e;console.log("WinnersByCountry render"),t=y(t),console.log("WinnersByCountry barchartData:",t);const c=50*t.length;return console.log("WinnersByCountry minWidth:",c),Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(Y.a,{width:"100%",minWidth:c,height:600,children:Object(O.jsxs)(K.a,{data:t,margin:H,children:[Object(O.jsx)(F.a,{dataKey:a,tick:Object(O.jsx)(q,{data:t}),tickLine:!1,axisLine:!1,allowDataOverflow:!1,interval:0,fontSize:20}),Object(O.jsx)(P.a,{hide:!0,axisLine:!1,tickLine:!1}),Object(O.jsx)(R.a,{content:Object(O.jsx)(G,{})}),Object(O.jsx)(N.a,{align:"center",verticalAlign:"middle",height:36,wrapperStyle:{top:3,paddingTop:2,fontSize:20}}),Object(O.jsxs)(I.a,{name:"Nobel winners by country(".concat(i,"~").concat(l,")"),dataKey:r,fill:s,legendType:"square",interval:30,children:[Object(O.jsx)(E.a,{dataKey:r,position:"top"}),t.map(((e,t)=>Object(O.jsx)(z.a,{fill:d[t%d.length]},"cell-".concat(t))))]})]})})})},q=e=>{const{x:t,y:a,payload:n,data:r,index:o}=e;return console.log("Render AxisTick props:",e),console.log("Payload value:",r[n.value-1].country),Object(O.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:Object(O.jsx)("text",{x:0,y:0,dx:-5,dy:0,textAnchor:"end",fill:s,transform:"rotate(-90)",children:r[n.value-1].country})})},G=e=>{let{active:t,payload:a,label:n}=e;return null};var J=n.memo(V),Q=a(600),U=a(282);Math.PI;const X={top:30,right:5,bottom:100,left:40},Z=e=>{let{data:t,dataKey:a,beginYear:n,endYear:r}=e;console.log("WinnersByRadio render");const o=ae(t,5);return console.log("WinnersByRadio - filtered pie data:",o),Object(O.jsx)(Y.a,{width:"100%",minWidth:240,height:600,minHeight:500,children:Object(O.jsxs)(Q.a,{margin:X,children:[Object(O.jsxs)("text",{x:150,y:30,fill:s,fontSize:20,textAnchor:"middle",children:["Winners Percentage By Country",Object(O.jsxs)("tspan",{x:120,y:50,children:["(",n,"~",r,")"]})]}),Object(O.jsx)(U.a,{data:o,dataKey:a,cx:120,cy:150,outerRadius:70,label:$,children:o.map(((e,t)=>Object(O.jsx)(z.a,{fill:d[t%d.length]},"cell-".concat(t))))}),Object(O.jsx)(R.a,{contentStyle:{backgroundColor:c,borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(O.jsx)(ee,{data:o}),allowEscapeViewBox:{x:!1,y:!1}}),Object(O.jsx)(N.a,{content:Object(O.jsx)(te,{data:o})})]})})},$=e=>{const{x:t,y:a,cx:n,cy:r,midAngle:o,innerRadius:i,outerRadius:l,percent:s,index:c}=e;return console.log("Pie label:",e),Object(O.jsx)("text",{x:t,y:a,fill:"black",textAnchor:t>n?"start":"end",dominantBaseline:"central",children:"".concat((100*s).toFixed(0),"%")})},ee=e=>{const{data:t,active:a,payload:n,label:r,contentStyle:o}=e;if(console.log("Pie tooltop:",e),a&&n&&n.length){const e=n[0].name;console.log("Pie index:",e);const{country:a,number:r,radio:i}=t[e];return Object(O.jsxs)("div",{style:{...o,color:s},children:[Object(O.jsx)("p",{children:"Percentage: ".concat(i.toFixed(0),"%")}),Object(O.jsx)("p",{children:"Number: ".concat(r)}),Object(O.jsx)("p",{children:"Country: ".concat(a)})]})}return null},te=e=>{const{data:t,payload:a}=e;return console.log("WinnersByRadio legend:",e),Object(O.jsx)("ul",{style:{marginTop:20},children:a.map(((e,a)=>Object(O.jsx)("li",{style:{color:d[a%d.length]},children:t[e.value].country},"item-".concat(a))))})},ae=(e,t)=>{let a=(e=(e=>{let t=e.reduce(((e,t)=>e+t.number),0);return e.forEach((e=>{e.radio=100*e.number/t})),e})(e=y(e))).reduce(((e,t)=>e+t.number),0),n=e.filter((e=>e.radio>=t)),r=100-n.reduce(((e,t)=>e+t.radio),0),o=n.reduce(((e,t)=>e+t.number),0);return n.push({country:"Others",countryId:n.length+1,number:a-o,radio:r}),n};var ne=n.memo(Z),re=a(594),oe=a(595),ie=a(160),le=a(286);const se=15,ce={top:20,right:20,bottom:30,left:0},de={left:10,right:20},he={top:10,bottom:10},ye=e=>{console.log("WinnersByCategory render!");const{data:t}=e,[a,n]=(e=>{const t=[...e].sort(((e,t)=>l.a(e.year,t.year)||l.a(e.category,t.category))),a=l.e(t,(e=>e.year));return a.forEach((e=>{let[t,a]=e;a.forEach(((e,t)=>{e.index=t+1}))})),t.maxWinners=l.h(a,(e=>e[1].length)),t.yearNum=t[t.length-1].year-t[0].year+1,console.log("WinnersByCategory sorted data:",t),[t,e.categories.slice().sort()]})(t),r=1.2*se*a.maxWinners+ce.top+ce.bottom+he.top+he.bottom,o=20*a.yearNum+de.left+de.right+ce.left+ce.right;return console.log("WinnersByCategory Chart height:",r," xAxisWidth:",o),Object(O.jsx)("div",{style:{width:"100%",height:r+20,overflow:"auto"},children:Object(O.jsxs)(re.a,{margin:ce,width:o,height:r,minHeight:400,children:[Object(O.jsx)(oe.a,{strokeDasharray:"3 3"}),Object(O.jsx)(F.a,{allowDuplicatedCategory:!1,dataKey:"year",type:"number",name:"year",domain:["dataMin","dataMax"],interval:0,tickCount:a.yearNum/2+1,angle:-90,minTickGap:20,tickMargin:25,padding:de,tick:{textAnchor:"middle",verticalAnchor:"end",dx:-3},allowDataOverflow:!0}),Object(O.jsx)(P.a,{dataKey:"index",type:"number",name:"WinnerCount",interval:0,tickCount:a.maxWinners,domain:["dataMin","dataMax+2"],padding:he}),Object(O.jsx)(ie.a,{type:"number",range:[100,100]}),Object(O.jsx)(N.a,{layout:"horizontal",align:"left",verticalAlign:"top",wrapperStyle:{paddingLeft:60,paddingBottom:10,width:"50%"}}),Object(O.jsx)(R.a,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:c,borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(O.jsx)(ge,{categories:n}),allowEscapeViewBox:{x:!1,y:!1}}),n.map(((e,t)=>{const n=a.filter((t=>t.category==e));return Object(O.jsx)(le.a,{shape:"circle",legendType:"circle",name:e,data:n,fill:d[t%d.length],children:n.map(((e,a)=>Object(O.jsx)(z.a,{fill:d[t%d.length]},"cell-".concat(a))))},t)}))]})})},ge=e=>{const{active:t,payload:a,label:n,contentStyle:r,categories:o}=e;if(t&&a&&a.length){console.log("Scatter tooltop:",e);const{year:t,country:n,category:i,name:l}=a[0].payload,s=o.indexOf(i),c=d[s%d.length];return Object(O.jsxs)("div",{style:{...r,color:c},children:[Object(O.jsx)("p",{children:"Year:".concat(t)}),Object(O.jsx)("p",{children:"Category:".concat(i)}),Object(O.jsx)("p",{children:"Country:".concat(n)}),Object(O.jsx)("p",{children:"Name:".concat(l)})]})}return null};var je=r.a.memo(ye),ue=a(596),be=a(287);const xe=e=>{let{data:t}=e;console.log("WinnersByYear render"),t=(e=>{const t=e.winnersByCountry.map((e=>e[0]));console.log("WinnersByYear country:",t);let a=l.f([...e],(e=>e.length),(e=>e.year),(e=>e.country)).sort(((e,t)=>l.a(e[0],t[0])||l.a(e[1],t[1])));return a=l.e(a,(e=>e[0])).map((e=>[e[0],e[1].map((e=>[e[1],e[2]]))])),a=a.map((e=>{const a={year:e[0]};return t.forEach((t=>{const n=Object.fromEntries(e[1]);n.hasOwnProperty(t)?a[t]=n[t]:a[t]=0})),a})),a.countries=t,a.yearNum=a[a.length-1].year-a[0].year+1,console.log("WinnersByYear sorted data:",a),a})(t);const a={top:20,right:100,bottom:30,left:30},n={left:10,right:20},r=400+a.top+a.bottom+10+10,o=20*t.yearNum+n.left+n.right+a.left+a.right;return console.log("WinnersByYear Chart height:",r," xAxisWidth:",o),Object(O.jsx)("div",{style:{width:"100%",height:r+20,overflow:"auto"},children:Object(O.jsxs)(ue.a,{data:t,margin:a,width:o,height:r,children:[Object(O.jsx)(oe.a,{strokeDasharray:"3 3"}),Object(O.jsx)(F.a,{allowDuplicatedCategory:!1,dataKey:"year",type:"number",name:"year",domain:["dataMin","dataMax"],interval:0,tickCount:t.yearNum/2+1,angle:-90,minTickGap:20,tickMargin:25,padding:n,tick:{textAnchor:"middle",verticalAnchor:"end",dx:-3},allowDataOverflow:!0}),Object(O.jsx)(P.a,{}),Object(O.jsx)(R.a,{contentStyle:{backgroundColor:c,borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(O.jsx)(pe,{}),allowEscapeViewBox:{x:!1,y:!1}}),Object(O.jsx)(N.a,{layout:"horizontal",align:"left",verticalAlign:"top",iconType:"rect",wrapperStyle:{paddingLeft:60,paddingBottom:10,width:"50%"}}),t.countries.map(((e,t)=>Object(O.jsx)(be.a,{type:"step",dataKey:e,stackId:"1",stroke:d[t%d.length],fill:d[t%d.length]},t)))]})})},pe=e=>{const{active:t,payload:a,label:n,contentStyle:r}=e;return console.log("Area tooltop:",e),t&&a&&a.length?(a.filter((e=>e.value>0)),Object(O.jsxs)("div",{style:{...r},children:[Object(O.jsx)("p",{style:{color:s},children:"Year:".concat(n)}),a.sort(((e,t)=>t.value-e.value)).filter((e=>e.value>0)).map(((e,t)=>Object(O.jsx)("p",{style:{color:e.fill},children:"".concat(e.dataKey,":").concat(e.value)},t)))]})):null};var me=n.memo(xe),fe=a(212);var Oe=function(e){let{data:t}=e;console.log("WinnersByTable render");const a=t.map(((e,t)=>(e.id=t,e)));console.log("WinnersByTable data:",t[0]);const n=Object.entries(t[0]).map((e=>{let t={field:e[0],headerName:e[0],width:150,fluid:1};return"id"==e[0]&&(t.hide=!0),"link"==e[0]?t.renderCell=e=>Object(O.jsx)("div",{style:{overflow:"auto",lineHeight:"160%",padding:0},children:Object(O.jsx)("a",{href:e.value,children:e.row.name})}):t.renderCell=e=>Object(O.jsx)("div",{style:{overflow:"auto",lineHeight:"160%",padding:0},children:"object"==typeof e.value&&null!=e.value?e.value.toString():e.value}),t}));return Object(O.jsx)("div",{style:{height:480,width:"100%"},children:Object(O.jsx)(fe.a,{rows:a,columns:n,components:{Toolbar:fe.b}})})};const we=e=>{let{data:t,selectedChart:a}=e;console.log("NobelCharts render:",t);const r=Object(n.useMemo)((()=>(e=>(console.log("build ScatterChart:",e),Object(O.jsx)(g.a,{item:!0,width:"100%",children:Object(O.jsx)(je,{data:e})})))(t)),[t]),o=Object(n.useMemo)((()=>(e=>(console.log("build barchart"),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g.a,{item:!0,sx:{width:{xs:"100%",sm:"100%",md:"100%",lg:"75%",xl:"75%"},maxWidth:{xs:"100%",sm:"100%",md:"100%",lg:"75%",xl:"75%"}},children:Object(O.jsx)(J,{data:e,xDataKey:"countryId",xDataType:"number",barDataKey:"number",barDataType:"number",beginYear:e.year[0],endYear:e.year[1]})}),Object(O.jsx)(g.a,{item:!0,sx:{width:{xs:"100%",sm:"100%",md:"100%",lg:"25%",xl:"25%"},maxWidth:{xs:"100%",sm:"100%",md:"100%",lg:"25%",xl:"25%"}},children:Object(O.jsx)(ne,{data:e,dataKey:"radio",beginYear:e.year[0],endYear:e.year[1]})})]})))(t)),[t]),i=Object(n.useMemo)((()=>(e=>(console.log("build AreaChart"),Object(O.jsx)(g.a,{item:!0,width:"100%",children:Object(O.jsx)(me,{data:e})})))(t)),[t]),l=Object(n.useMemo)((()=>(e=>(console.log("build buildTableChart"),Object(O.jsx)(g.a,{item:!0,width:"100%",children:Object(O.jsx)(Oe,{data:e})})))(t)),[t]);return Object(O.jsx)(g.a,{container:!0,direction:"row",columnSpacing:2,rowSpacing:2,justifyContent:"space-between",alignItems:"center",wrap:"wrap",marginTop:2,children:{WinnersByCategory:r,WinnersByCountry:o,WinnersByYear:i,WinnersByTable:l}[a]})};a(525);const ve=a(233),Ce=e=>{const[{data:t,isDataLoaded:a},r]=Object(n.useState)({data:null,isDataLoaded:!1}),[o,i]=Object(n.useState)("WinnersByCountry");Object(n.useEffect)((()=>{console.log("Data fetch start"),async function(e){console.log("URL:",e);const t=await fetch(e).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.text()})).catch((e=>{throw e}));return console.log("Data fetch complete!"),t}("https://gist.githubusercontent.com/idatatalks/8612a9f89c444b82728473a545813789/raw/nobel_winners_cleaned.csv").then((e=>{console.log("Data parse start, rawData:",e),e=l.c(e,l.b);const t=new h(e);r({data:t,isDataLoaded:!0}),console.log("Data parse end!")})).catch((e=>console.log("Data fetch failed due to => ",e))),console.log("Data fetch end!")}),[]);const s=Object(n.useCallback)((e=>{r({data:ve.clone(t.filterData(e)),isDataLoaded:!0})}),[t]),c=Object(n.useCallback)((e=>{console.log("Chart:",e," is selected."),i(e)}),[]);return console.log("NobelApp rendering:",t," active chart:",o),a?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(S,{data:t,onSetFilter:s}),Object(O.jsx)(M,{selection:o,onSetSelection:c}),Object(O.jsx)(we,{data:t.filteredData,selectedChart:o})]}):Object(O.jsx)("h1",{children:"Loading data...... please be patient or try again!"})},_e=document.getElementById("root");i.a.render(Object(O.jsx)(Ce,{}),_e)}},[[526,1,2]]]);
//# sourceMappingURL=main.f8253a3f.chunk.js.map