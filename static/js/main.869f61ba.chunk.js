(this["webpackJsonpnobel-dev"]=this["webpackJsonpnobel-dev"]||[]).push([[0],{233:function(e,t,a){e.exports={App:"styles_App__1QDQB",ScatterPlot:"styles_ScatterPlot__2XZuw","recharts-responsive-container":"styles_recharts-responsive-container__3KPgH",MyToggleButton:"styles_MyToggleButton__3f7XW","MuiToggleButtonGroup-grouped":"styles_MuiToggleButtonGroup-grouped__Gve37"}},527:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(65),l=a.n(r),i=a(583),s=a(278),c=a(587),d=a(85),h=a(86),g=a(137),u=(a(233),a(1));i.a,s.a,c.a,d.a,h.a,g.a;var y=a(33);const j="#666",b=["#0cc0aa","#4787c9","#fb0998","#59a20c","#7c08c5","#e0c645","#715cb6","#ef972d","#a57a6a","#c6c0fe","#ec9bfa","#421674","#b3e467","#5c190c","#55f17b","#c25357","#b9dcca","#29403b","#f4b8ab","#6a8b7b"];class x{constructor(e){this._data=e,this._initOptions(),this._initFilters(),this.filterData()}get options(){return this._options}get filters(){return this._filters}get filteredData(){return this._filteredData}}x.prototype._initOptions=function(){this._options={},this._options.countries=Array.from(y.g(this._data,(e=>e.country)).keys()).sort(),this._options.categories=Array.from(y.g(this._data,(e=>e.category)).keys()),this._options.years=Array.from(y.g(this._data,(e=>e.year)).keys()).sort(((e,t)=>e-t)),this._options.genders=["Male","Female"]},x.prototype._initFilters=function(){const e=this._options.years.length-1;this._filters={},this._filters.category=[...this._options.categories],this._filters.gender=[...this._options.genders],this._filters.country=y.i(this._data,(e=>e.length),(e=>e.country)).sort(((e,t)=>y.d(e[1],t[1]))).slice(0,10).map((e=>e[0])).concat(["China","India"]),this._filters.year=[this._options.years[0],this._options.years[e]]},x.prototype._buildChartData=function(){this._filteredData.winnersByCountry=y.f(this._filteredData,(e=>e.length),(e=>e.country)).sort(((e,t)=>y.d(e[1],t[1]))),this._filteredData.maxWinners=this._filteredData.winnersByCountry[0],this._filteredData.sumWinners=y.j(this._filteredData.winnersByCountry,(e=>{let[t,a]=e;return a})),this._filteredData.countryNum=this._filteredData.winnersByCountry.length,this._filteredData.year=this._filters.year,this._filteredData.categories=this._filters.category},x.prototype.filterData=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&(this._filters=e),console.log("Before filter, filters:",e),console.log("Before filter, data:",this),this._filteredData=this._data.filter((e=>e.year>=this._filters.year[0]&&e.year<=this._filters.year[1]&&this._filters.country.find((t=>t.toLowerCase()==e.country.toLowerCase()))&&this._filters.category.find((t=>t.toLowerCase()==e.category.toLowerCase()))&&this._filters.gender.find((t=>t.toLowerCase()==e.gender.toLowerCase())))),this._buildChartData(),console.log("After filter, data:",this),this};const p=e=>e.winnersByCountry.map(((e,t)=>({country:e[0],number:e[1],countryId:t+1})));var m=a(605),f=a(604),O=a(215),w=a(50),v=a(138),X=a(593),_=a(176),C=a(299);const D=a(267),B={PaperProps:{style:{maxHeight:224,width:250}}},S=e=>{let{data:t,label:a,options:o,defaultOptions:r,onSetFilter:l,sx:i}=e;console.log("label:",a);const[s,c]=Object(n.useState)(r),[[d,h],g]=Object(n.useState)([D.uniqueId(a+"_id_"),D.uniqueId(a+"_select_")]);return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)(v.a,{sx:{...i},children:[Object(u.jsx)(O.a,{id:d,children:a}),Object(u.jsx)(_.a,{labelId:d,id:h,multiple:!0,value:s,onChange:e=>{const{target:{value:n}}=e,o="string"===typeof n?n.split(","):n;c(o),console.log("new filter:",{...t.filters,[a.toLowerCase()]:o}),l({...t.filters,[a.toLowerCase()]:o})},input:Object(u.jsx)(f.a,{label:a}),renderValue:e=>e.join(", "),MenuProps:B,sx:{fontSize:"small",fontWeight:200},children:o.map((e=>Object(u.jsxs)(w.a,{value:e,sx:{fontSize:"small"},children:[Object(u.jsx)(C.a,{checked:s.includes(e)}),Object(u.jsx)(X.a,{primary:e})]},e)))})]})})};var W=a(300),k=a(601);function T(e){const{range:t,onSetFilter:a,data:o,min:r,max:l}=e,[i,s]=Object(n.useState)(t);return Object(u.jsx)(W.a,{elevation:10,sx:{textAlign:"center",pt:2,px:3},children:Object(u.jsx)(k.a,{defaultValue:t,value:i,onChange:(e,t)=>{console.log("On Slider Change:",t),s(t)},onChangeCommitted:(e,t)=>{console.log("On Slider Commit Change:",t),a({...o.filters,year:t})},valueLabelDisplay:"on",min:r,max:l,step:1,marks:!0,disableSwap:!0,sx:{mt:0}})})}const A=e=>{let{data:t,onSetFilter:a}=e;console.log("Menu rendering");const n={data:t,onSetFilter:a,sx:{width:"100%",maxWidth:"100%"}},o=t.options.years.length-1;return Object(u.jsxs)(m.a,{container:!0,direction:"row",columnSpacing:2,rowSpacing:1,justifyContent:"center",alignItems:"center",wrap:"wrap",mt:1,children:[Object(u.jsx)(m.a,{item:!0,xs:8,sm:4,md:4,lg:2,xl:2,children:Object(u.jsx)(S,{...n,label:"Category",options:t.options.categories,defaultOptions:t.filters.category})}),Object(u.jsx)(m.a,{item:!0,xs:4,sm:2,md:2,lg:1,xl:1,children:Object(u.jsx)(S,{...n,label:"Gender",options:t.options.genders,defaultOptions:t.filters.gender})}),Object(u.jsx)(m.a,{item:!0,xs:12,sm:6,md:6,lg:3,xl:3,children:Object(u.jsx)(S,{...n,label:"Country",options:t.options.countries,defaultOptions:t.filters.country})}),Object(u.jsx)(m.a,{item:!0,xs:12,sm:10,md:10,lg:6,xl:6,children:Object(u.jsx)(T,{...n,range:t.filters.year,min:t.options.years[0],max:t.options.years[o]})})]})};var Y=n.memo(A),L=a(606),M=a(603);const P=[{value:"WinnersByCountry",text:"Winners By Country"},{value:"WinnersByCategory",text:"Winners By Category"},{value:"WinnersByYear",text:"Winners By Year"},{value:"WinnersByTable",text:"Winners By Table"}];function K(e){let{selection:t,onSetSelection:a}=e;console.log("MenuCharts render");return Object(u.jsx)("div",{style:{textAlign:"center",marginTop:10},children:Object(u.jsx)(M.a,{root:!0,color:"primary",value:t,exclusive:!0,onChange:(e,t)=>{console.log("handleSelection newSelection:",t),t&&a(t)},sx:{textTransform:"none",justifyContent:"center",flexWrap:"wrap"},children:P.map(((e,t)=>Object(u.jsx)(L.a,{value:e.value,classes:{root:{border:"2px solid yellow"}},sx:{boxShadow:2,textTransform:"none",fontSize:"large",m:0,p:1},children:e.text},t)))})})}var F=n.memo(K),R=a(595),N=a(596),I=a(133),E=a(283),z=a(71),G=a(112);const H={top:80,right:5,bottom:100,left:30},V=e=>{let{data:t,xDataKey:a,xDataType:n,barDataKey:o,barDataType:r,beginYear:l,endYear:i}=e;console.log("WinnersByCountry render"),t=p(t),console.log("WinnersByCountry barchartData:",t);const s=50*t.length;return console.log("WinnersByCountry minWidth:",s),Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(R.a,{width:"100%",minWidth:s,height:600,children:Object(u.jsxs)(N.a,{data:t,margin:H,children:[Object(u.jsx)(d.a,{dataKey:a,tick:Object(u.jsx)(q,{data:t}),tickLine:!1,axisLine:!1,allowDataOverflow:!1,interval:0,fontSize:20}),Object(u.jsx)(h.a,{hide:!0,axisLine:!1,tickLine:!1}),Object(u.jsx)(g.a,{content:Object(u.jsx)(J,{})}),Object(u.jsx)(I.a,{align:"center",verticalAlign:"middle",height:36,wrapperStyle:{top:3,paddingTop:2,fontSize:20}}),Object(u.jsxs)(E.a,{name:"Nobel winners by country(".concat(l,"~").concat(i,")"),dataKey:o,fill:j,legendType:"square",interval:30,children:[Object(u.jsx)(z.a,{dataKey:o,position:"top"}),t.map(((e,t)=>Object(u.jsx)(G.a,{fill:b[t%b.length]},"cell-".concat(t))))]})]})})})},q=e=>{const{x:t,y:a,payload:n,data:o,index:r}=e;return console.log("Render AxisTick props:",e),console.log("Payload value:",o[n.value-1].country),Object(u.jsx)("g",{transform:"translate(".concat(t,",").concat(a,")"),children:Object(u.jsx)("text",{x:0,y:0,dx:-5,dy:0,textAnchor:"end",fill:j,transform:"rotate(-90)",children:o[n.value-1].country})})},J=e=>{let{active:t,payload:a,label:n}=e;return null};var Q=n.memo(V),U=a(602),Z=a(284);Math.PI;const $={top:30,right:5,bottom:100,left:40},ee=e=>{let{data:t,dataKey:a,beginYear:n,endYear:o}=e;console.log("WinnersByRadio render");const r=oe(t,5);return console.log("filtered pie data:",r),Object(u.jsx)(R.a,{width:"100%",minWidth:240,height:600,minHeight:500,children:Object(u.jsxs)(U.a,{margin:$,children:[Object(u.jsxs)("text",{x:150,y:30,fill:j,fontSize:20,textAnchor:"middle",children:["Winners Percentage By Country",Object(u.jsxs)("tspan",{x:120,y:50,children:["(",n,"~",o,")"]})]}),Object(u.jsx)(Z.a,{data:r,dataKey:a,cx:120,cy:150,outerRadius:70,fill:"#8884d8",label:te,children:r.map(((e,t)=>Object(u.jsx)(G.a,{fill:b[t%b.length]},"cell-".concat(t))))}),Object(u.jsx)(g.a,{contentStyle:{backgroundColor:"#f7efd2",borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(u.jsx)(ae,{data:r}),allowEscapeViewBox:{x:!1,y:!1}}),Object(u.jsx)(I.a,{content:Object(u.jsx)(ne,{data:r})})]})})},te=e=>{const{x:t,y:a,cx:n,cy:o,midAngle:r,innerRadius:l,outerRadius:i,percent:s,index:c}=e;return console.log("Pie label:",e),Object(u.jsx)("text",{x:t,y:a,fill:"black",textAnchor:t>n?"start":"end",dominantBaseline:"central",children:"".concat((100*s).toFixed(0),"%")})},ae=e=>{const{data:t,active:a,payload:n,label:o,contentStyle:r}=e;if(console.log("Pie tooltop:",e),a&&n&&n.length){const e=n[0].name;console.log("Pie index:",e);const{country:a,number:o,radio:l}=t[e];return Object(u.jsxs)("div",{style:{...r,color:j},children:[Object(u.jsx)("p",{children:"Percentage: ".concat(l.toFixed(0),"%")}),Object(u.jsx)("p",{children:"Number: ".concat(o)}),Object(u.jsx)("p",{children:"Country: ".concat(a)})]})}return null},ne=e=>{const{data:t,payload:a}=e;return console.log("xxx legend:",e),Object(u.jsx)("ul",{style:{marginTop:20},children:a.map(((e,a)=>Object(u.jsx)("li",{style:{color:b[a%b.length]},children:t[e.value].country},"item-".concat(a))))})},oe=(e,t)=>{e=p(e),console.log("barchartData:",e),e=(e=>{let t=e.reduce(((e,t)=>e+t.number),0);return e.forEach((e=>{e.radio=100*e.number/t})),e})(e),console.log("XXXXXX, RAW data:",e);let a=e.reduce(((e,t)=>e+t.number),0);console.log("XXXXXX, RAW data total num:",a);let n=e.filter((e=>e.radio>=t));console.log("XXXXXX, filtered data:",n);let o=100-n.reduce(((e,t)=>e+t.radio),0),r=n.reduce(((e,t)=>e+t.number),0);return n.push({country:"Others",countryId:n.length+1,number:a-r,radio:o}),n};var re=n.memo(ee),le=a(597),ie=a(162),se=a(288);const ce=15,de={top:20,right:20,bottom:30,left:0},he={left:10,right:20},ge={top:10,bottom:10},ue=e=>{console.log("WinnersByCategory render!");const{data:t}=e,[a,n]=(e=>{const t=[...e].sort(((e,t)=>y.a(e.year,t.year)||y.a(e.category,t.category)));console.log("XXXXX dataPerYear1:",t),console.log("XXXXX dataPerYear1:",e);const a=y.e(t,(e=>e.year));return a.forEach((e=>{let[t,a]=e;a.forEach(((e,t)=>{e.index=t+1}))})),console.log("XXXXX sorted category:",e.categories.slice().sort()),t.maxWinners=y.h(a,(e=>e[1].length)),t.yearNum=t[t.length-1].year-t[0].year+1,console.log("XXXXX dataPerYear2:",a),console.log("XXXXX sorted data:",t),[t,e.categories.slice().sort()]})(t),o=1.2*ce*a.maxWinners+de.top+de.bottom+ge.top+ge.bottom,r=20*a.yearNum+he.left+he.right+de.left+de.right;return console.log("WinnersByCategory Chart height:",o," xAxisWidth:",r),Object(u.jsx)("div",{style:{width:"100%",height:o+20,overflow:"auto"},children:Object(u.jsxs)(le.a,{margin:de,width:r,height:o,minHeight:400,children:[Object(u.jsx)(c.a,{strokeDasharray:"3 3"}),Object(u.jsx)(d.a,{allowDuplicatedCategory:!1,dataKey:"year",type:"number",name:"year",domain:["dataMin","dataMax"],interval:0,tickCount:a.yearNum/2+1,angle:-90,minTickGap:20,tickMargin:25,padding:he,tick:{textAnchor:"middle",verticalAnchor:"end",dx:-3},allowDataOverflow:!0}),Object(u.jsx)(h.a,{dataKey:"index",type:"number",name:"WinnerCount",interval:0,tickCount:a.maxWinners,domain:["dataMin","dataMax+2"],padding:ge}),Object(u.jsx)(ie.a,{type:"number",range:[100,100]}),Object(u.jsx)(I.a,{layout:"horizontal",align:"left",verticalAlign:"top",wrapperStyle:{paddingLeft:60,paddingBottom:10,width:"50%"}}),Object(u.jsx)(g.a,{cursor:{strokeDasharray:"3 3"},contentStyle:{backgroundColor:"#f7efd2",borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(u.jsx)(ye,{categories:n}),allowEscapeViewBox:{x:!1,y:!1}}),n.map(((e,t)=>{const n=a.filter((t=>t.category==e));return console.log("fff category:",n),Object(u.jsx)(se.a,{shape:"circle",legendType:"circle",name:e,data:n,fill:b[t%b.length],children:n.map(((e,a)=>Object(u.jsx)(G.a,{fill:b[t%b.length]},"cell-".concat(a))))})}))]})})},ye=e=>{const{active:t,payload:a,label:n,contentStyle:o,categories:r}=e;if(t&&a&&a.length){console.log("Scatter tooltop:",e);const{year:t,country:n,category:l,name:i}=a[0].payload,s=r.indexOf(l),c=b[s%b.length];return console.log("index:",s),console.log("categories:",l),Object(u.jsxs)("div",{style:{...o,color:c},children:[Object(u.jsx)("p",{children:"Year:".concat(t)}),Object(u.jsx)("p",{children:"Category:".concat(l)}),Object(u.jsx)("p",{children:"Country:".concat(n)}),Object(u.jsx)("p",{children:"Name:".concat(i)})]})}return null};var je=o.a.memo(ue),be=a(598),xe=a(289);const pe=e=>{let{data:t}=e;console.log("WinnersByYear render, data:",t),t=(e=>{const t=e.winnersByCountry.map((e=>e[0]));console.log("XXXXX country:",t),console.log("XXXXX data:",e);let a=y.f([...e],(e=>e.length),(e=>e.year),(e=>e.country)).sort(((e,t)=>y.a(e[0],t[0])||y.a(e[1],t[1])));return a=y.e(a,(e=>e[0])).map((e=>[e[0],e[1].map((e=>[e[1],e[2]]))])),console.log("XXXXX sortedData1:",a),a=a.map((e=>{const a={year:e[0]};return t.forEach((t=>{const n=Object.fromEntries(e[1]);n.hasOwnProperty(t)?a[t]=n[t]:a[t]=0})),a})),console.log("XXXXX sortedData2:",a),a.countries=t,a.yearNum=a[a.length-1].year-a[0].year+1,console.log("XXXXX sorted data:",a),a})(t);const a={top:20,right:100,bottom:30,left:30},n={left:10,right:20},o=400+a.top+a.bottom+10+10,r=20*t.yearNum+n.left+n.right+a.left+a.right;return console.log("XXX Chart height:",o),console.log("XXX xAxisWidth:",r),Object(u.jsx)("div",{style:{width:"100%",height:o+20,overflow:"auto"},children:Object(u.jsxs)(be.a,{data:t,margin:a,width:r,height:o,children:[Object(u.jsx)(c.a,{strokeDasharray:"3 3"}),Object(u.jsx)(d.a,{allowDuplicatedCategory:!1,dataKey:"year",type:"number",name:"year",domain:["dataMin","dataMax"],interval:0,tickCount:t.yearNum/2+1,angle:-90,minTickGap:20,tickMargin:25,padding:n,tick:{textAnchor:"middle",verticalAnchor:"end",dx:-3},allowDataOverflow:!0}),Object(u.jsx)(h.a,{}),Object(u.jsx)(g.a,{contentStyle:{backgroundColor:"#f7efd2",borderRadius:10,paddingTop:2,paddingBottom:2,paddingLeft:10,paddingRight:10},content:Object(u.jsx)(me,{}),allowEscapeViewBox:{x:!1,y:!1}}),Object(u.jsx)(I.a,{layout:"horizontal",align:"left",verticalAlign:"top",iconType:"rect",wrapperStyle:{paddingLeft:60,paddingBottom:10,width:"50%"}}),t.countries.map(((e,t)=>Object(u.jsx)(xe.a,{type:"step",dataKey:e,stackId:"1",stroke:b[t%b.length],fill:b[t%b.length]},t)))]})})},me=e=>{const{active:t,payload:a,label:n,contentStyle:o}=e;return console.log("Area tooltop:",e),t&&a&&a.length?(a.filter((e=>e.value>0)),Object(u.jsxs)("div",{style:{...o},children:[Object(u.jsx)("p",{style:{color:j},children:"Year:".concat(n)}),a.sort(((e,t)=>t.value-e.value)).filter((e=>e.value>0)).map(((e,t)=>Object(u.jsx)("p",{style:{color:e.fill},children:"".concat(e.dataKey,":").concat(e.value)},t)))]})):null};var fe=n.memo(pe),Oe=a(212);var we=function(e){let{data:t}=e;console.log("WinnersByTable render:",t);const a=t.map(((e,t)=>(e.id=t,e)));console.log("WinnersByTable:",t[0]);const n=Object.entries(t[0]).map((e=>{let t={field:e[0],headerName:e[0],width:150,fluid:1};return"id"==e[0]&&(t.hide=!0),"link"==e[0]?t.renderCell=e=>(console.log("YYYY:",e),Object(u.jsx)("div",{style:{overflow:"auto",lineHeight:"160%",padding:0},children:Object(u.jsx)("a",{href:e.value,children:e.row.name})})):t.renderCell=e=>(console.log("YYYYY:",e),Object(u.jsx)("div",{style:{overflow:"auto",lineHeight:"160%",padding:0},children:"object"==typeof e.value&&null!=e.value?e.value.toString():e.value})),t}));return Object(u.jsx)("div",{style:{height:480,width:"100%"},children:Object(u.jsx)(Oe.a,{rows:a,columns:n,components:{Toolbar:Oe.b}})})};const ve=e=>{let{data:t,selectedChart:a}=e;console.log("NobelCharts render:",t);const o=Object(n.useMemo)((()=>(e=>(console.log("build ScatterChart:",e),Object(u.jsx)(m.a,{item:!0,width:"100%",children:Object(u.jsx)(je,{data:e})})))(t)),[t]),r=Object(n.useMemo)((()=>(e=>(console.log("build barchart"),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(m.a,{item:!0,sx:{width:{xs:"100%",sm:"100%",md:"100%",lg:"75%",xl:"75%"},maxWidth:{xs:"100%",sm:"100%",md:"100%",lg:"75%",xl:"75%"}},children:Object(u.jsx)(Q,{data:e,xDataKey:"countryId",xDataType:"number",barDataKey:"number",barDataType:"number",beginYear:e.year[0],endYear:e.year[1]})}),Object(u.jsx)(m.a,{item:!0,sx:{width:{xs:"100%",sm:"100%",md:"100%",lg:"25%",xl:"25%"},maxWidth:{xs:"100%",sm:"100%",md:"100%",lg:"25%",xl:"25%"}},children:Object(u.jsx)(re,{data:e,dataKey:"radio",beginYear:e.year[0],endYear:e.year[1]})})]})))(t)),[t]),l=Object(n.useMemo)((()=>(e=>(console.log("build AreaChart"),Object(u.jsx)(m.a,{item:!0,width:"100%",children:Object(u.jsx)(fe,{data:e})})))(t)),[t]),i=Object(n.useMemo)((()=>(e=>(console.log("build buildTableChart"),Object(u.jsx)(m.a,{item:!0,width:"100%",children:Object(u.jsx)(we,{data:e})})))(t)),[t]);return Object(u.jsx)(m.a,{container:!0,direction:"row",columnSpacing:2,rowSpacing:2,justifyContent:"space-between",alignItems:"center",wrap:"wrap",marginTop:2,children:{WinnersByCategory:o,WinnersByCountry:r,WinnersByYear:l,WinnersByTable:i}[a]})},Xe=a(267),_e=e=>{const[{data:t,isDataLoaded:a},o]=Object(n.useState)({data:null,isDataLoaded:!1}),[r,l]=Object(n.useState)("WinnersByCountry");Object(n.useEffect)((()=>{console.log("Data fetch start"),async function(e){console.log("URL:",e);const t=await fetch(e).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.text()})).catch((e=>{throw e}));return console.log("Data fetch complete!"),t}("nobel_winners_cleaned.csv").then((e=>{console.log("Data parse start, rawData:",e),e=y.c(e,y.b);const t=new x(e);o({data:t,isDataLoaded:!0}),console.log("Data parse end!")})).catch((e=>console.log("Data fetch failed due to => ",e))),console.log("Data fetch end!")}),[]);const i=Object(n.useCallback)((e=>{o({data:Xe.clone(t.filterData(e)),isDataLoaded:!0})}),[t]),s=Object(n.useCallback)((e=>{console.log("Chart:",e," is selected."),l(e)}),[]);return console.log("NobelApp rendering:",t," active chart:",r),a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(Y,{data:t,onSetFilter:i}),Object(u.jsx)(F,{selection:r,onSetSelection:s}),Object(u.jsx)(ve,{data:t.filteredData,selectedChart:r})]}):Object(u.jsx)("h1",{children:"Loading data...... please be patient or try again!"})},Ce=document.getElementById("root");l.a.render(Object(u.jsx)(_e,{}),Ce)}},[[527,1,2]]]);
//# sourceMappingURL=main.869f61ba.chunk.js.map